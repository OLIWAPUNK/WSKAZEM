[gd_scene format=3 uid="uid://c31twgojuxm01"]

[ext_resource type="Script" uid="uid://tbu5dankrsvh" path="res://Scripts/Navigation/PlayerMovement.gd" id="1_5cjrv"]
[ext_resource type="PackedScene" path="res://Scenes/UI/InventoryUI.tscn" id="1_bk3f7"]
[ext_resource type="Script" uid="uid://ghd7qncpwxfk" path="res://Scripts/Navigation/PointerManager.gd" id="1_kn06e"]
[ext_resource type="Script" uid="uid://b4w5ityiwubgl" path="res://Scripts/PuzzleManagement/GateReceiver.gd" id="4_bqmhc"]
[ext_resource type="Script" uid="uid://dv5nci6vmhwsx" path="res://Scripts/MapManager.gd" id="4_yjqcc"]
[ext_resource type="PackedScene" uid="uid://p6rboyogdta8" path="res://Scenes/GameWorld/Town.tscn" id="5_n4chi"]
[ext_resource type="PackedScene" uid="uid://dnssxr77f7rrc" path="res://Scenes/UI/DebugUI.tscn" id="7_y7y61"]
[ext_resource type="Script" uid="uid://dkjeyybq2qp35" path="res://Scripts/Navigation/NavigationManager.gd" id="8_kn06e"]
[ext_resource type="PackedScene" uid="uid://df6xotx6mg1cf" path="res://Scenes/UI/GameUI.tscn" id="10_7yo87"]
[ext_resource type="Script" uid="uid://s064dfms1h72" path="res://Scripts/PuzzleManagement/Gate.gd" id="11_n4chi"]
[ext_resource type="Script" uid="uid://crq604i2funnh" path="res://Scripts/PuzzleManagement/StateMachine.gd" id="13_crmc7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_q2d71"]
albedo_color = Color(0.31914717, 0.78852344, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_uo7di"]
material = SubResource("StandardMaterial3D_q2d71")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_o3h3i"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_5cjrv"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_y7y61"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_q2d71"]
material = SubResource("StandardMaterial3D_y7y61")
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_45d1s"]
albedo_color = Color(1, 0, 0, 1)
emission_enabled = true
emission = Color(1, 0, 0, 1)
emission_energy_multiplier = 4.67

[sub_resource type="SphereMesh" id="SphereMesh_y7y61"]
material = SubResource("StandardMaterial3D_45d1s")

[node name="World" type="Node3D" unique_id=493649897]

[node name="InventoryUI" parent="." unique_id=562304708 instance=ExtResource("1_bk3f7")]
unique_name_in_owner = true

[node name="GameUI" parent="." unique_id=254502312 instance=ExtResource("10_7yo87")]
unique_name_in_owner = true

[node name="DebugUI" parent="." unique_id=1958388161 instance=ExtResource("7_y7y61")]

[node name="PointerManager" type="Node" parent="." unique_id=1823950882]
unique_name_in_owner = true
script = ExtResource("1_kn06e")

[node name="GateReceiver" type="Node" parent="PointerManager" unique_id=610095838]
script = ExtResource("4_bqmhc")
metadata/_custom_type_script = "uid://b4w5ityiwubgl"

[node name="MapNode" type="Node" parent="." unique_id=1068162854]
script = ExtResource("4_yjqcc")

[node name="Town" parent="MapNode" unique_id=511812993 instance=ExtResource("5_n4chi")]

[node name="PuzzleZone" parent="MapNode/Town/PuzzleZoneManager" parent_id_path=PackedInt32Array(511812993, 1145479358) index="0" unique_id=858348189 node_paths=PackedStringArray("npcs")]
npcs = {
"Gostek": NodePath("../../NpcTree/NPC_Test2/CanBeTalkedTo")
}

[node name="PuzzleZoneState" parent="MapNode/Town/PuzzleZoneManager/PuzzleZone" index="0" unique_id=1446764935 node_paths=PackedStringArray("state_interpretations")]
state_interpretations = {
"Gostek": NodePath("../../../NpcTree/NPC_Test2/CanBeTalkedTo/Test")
}

[node name="PuzzleZoneState2" parent="MapNode/Town/PuzzleZoneManager/PuzzleZone" index="1" unique_id=469427966 node_paths=PackedStringArray("state_interpretations")]
state_interpretations = {
"Gostek": NodePath("../../../NpcTree/NPC_Test2/CanBeTalkedTo/Test2")
}

[node name="PlayerNode" type="Node" parent="." unique_id=1479561528]
unique_name_in_owner = true

[node name="PlayerMovement" type="Node" parent="PlayerNode" unique_id=1808820715]
script = ExtResource("1_5cjrv")

[node name="NavigationManager" type="Node" parent="PlayerNode" unique_id=423752423]
script = ExtResource("8_kn06e")

[node name="MovementIndicator" type="MeshInstance3D" parent="PlayerNode" unique_id=191477392]
visible = false
mesh = SubResource("SphereMesh_uo7di")

[node name="PlayerBody" type="CharacterBody3D" parent="PlayerNode" unique_id=842025175]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.727946, 2.608368, -24.07782)
collision_layer = 2

[node name="CameraPivot" type="Node3D" parent="PlayerNode/PlayerBody" unique_id=1690163304]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -27.272734, 15.770139, 12.426767)

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlayerNode/PlayerBody" unique_id=1368187650]
shape = SubResource("CapsuleShape3D_o3h3i")

[node name="MeshInstance3D" type="MeshInstance3D" parent="PlayerNode/PlayerBody" unique_id=926023323]
mesh = SubResource("CapsuleMesh_5cjrv")

[node name="Nos" type="MeshInstance3D" parent="PlayerNode/PlayerBody" unique_id=316577997]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2950921, 0.5110855)
mesh = SubResource("SphereMesh_q2d71")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="PlayerNode/PlayerBody" unique_id=1502227585]
path_max_distance = 3.0
debug_enabled = true

[node name="DEBUGBITCH" type="MeshInstance3D" parent="." unique_id=784557216]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.63717, 0, 0)
mesh = SubResource("SphereMesh_y7y61")

[node name="StateMachine" type="Node" parent="." unique_id=820749602 node_paths=PackedStringArray("gates")]
script = ExtResource("13_crmc7")
gates = {
"DefaultGate": NodePath("DefaultGate"),
"GateTest": NodePath("GateTest"),
"GateTest2": NodePath("GateTest2")
}

[node name="GateTest" type="Node" parent="StateMachine" unique_id=1347055519 node_paths=PackedStringArray("transmitters", "receivers")]
script = ExtResource("11_n4chi")
transmitters = [NodePath("../../MapNode/Town/NpcTree/NPC_Test2/CanBeTalkedTo/Test/InterpretationTransmitter")]
receivers = [NodePath("../../MapNode/Town/PuzzleZoneManager/PuzzleZone/PuzzleZoneState2/StateReceiver")]
metadata/_custom_type_script = "uid://s064dfms1h72"

[node name="GateTest2" type="Node" parent="StateMachine" unique_id=1591193504 node_paths=PackedStringArray("transmitters", "receivers")]
script = ExtResource("11_n4chi")
transmitters = [NodePath("../../MapNode/Town/NpcTree/NPC_Test2/CanBeTalkedTo/Test2/InterpretationTransmitter")]
receivers = [NodePath("../../MapNode/Town/PuzzleZoneManager/PuzzleZone/PuzzleZoneState/StateReceiver")]
metadata/_custom_type_script = "uid://s064dfms1h72"

[node name="DefaultGate" type="Node" parent="StateMachine" unique_id=1043395446 node_paths=PackedStringArray("transmitters", "receivers")]
script = ExtResource("11_n4chi")
transmitters = [NodePath("../../MapNode/Town/NpcTree/NPC_Test2/CanBeTalkedTo/Test/InterpretationTransmitter"), NodePath("../../MapNode/Town/NpcTree/NPC_Test2/CanBeTalkedTo/Test2/InterpretationTransmitter")]
receivers = [NodePath("../../PointerManager/GateReceiver")]
metadata/_custom_type_script = "uid://s064dfms1h72"

[node name="InterpretationStorage" type="Node" parent="." unique_id=506090218]

[editable path="MapNode/Town"]
[editable path="MapNode/Town/CameraNode/CameraZoneManager/CameraZone"]
[editable path="MapNode/Town/CameraNode/CameraZoneManager/CameraZone2"]
[editable path="MapNode/Town/CameraNode/CameraZoneManager/CameraZone3"]
[editable path="MapNode/Town/CameraNode/CameraZoneManager/CameraZone4"]
